import{g as u}from"./locationUtils.CAdnG0xJ.js";async function f(o,d){const{submitBtn:r,btnText:a,btnLoading:e,formStatus:s}=d;r.disabled=!0,a?.classList.add("hidden"),e?.classList.remove("hidden"),s?.classList.add("hidden");try{const t=new FormData(o),n={};t.forEach((m,l)=>{n[l]=m});const i=await fetch("/api/quote.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),c=await i.json();if(!i.ok||!c.ok)throw new Error(c.error||"Error desconocido");return{ok:!0}}catch(t){return{ok:!1,error:t.message}}finally{r.disabled=!1,a?.classList.remove("hidden"),e?.classList.add("hidden")}}function g(){const o=document.getElementById("quotation-form");if(!o)return;const d=document.getElementById("submit-btn"),r=document.getElementById("btn-text"),a=document.getElementById("btn-loading"),e=document.getElementById("form-status"),s=u();if(s){const t=document.getElementById("quote-location");t&&(t.value=s)}o.addEventListener("submit",async t=>{t.preventDefault();const n=await f(o,{submitBtn:d,btnText:r,btnLoading:a,formStatus:e});n.ok?(e.className="bg-green-50 border-2 border-green-200 text-green-800 px-4 py-3 rounded-lg text-sm font-medium",e.textContent="¡Cotización enviada! Te contactaremos pronto.",e.classList.remove("hidden"),window.gtag?.("event","generate_lead",{event_category:"form",event_label:"cotizacion",form_name:"cotizacion_hormigon",province:document.getElementById("quote-location")?.value||void 0}),o.reset(),e.scrollIntoView({behavior:"smooth",block:"nearest"})):(e.className="bg-red-50 border-2 border-red-200 text-red-800 px-4 py-3 rounded-lg text-sm font-medium",e.textContent=n.error||"Hubo un error al enviar. Por favor, intentá nuevamente.",e.classList.remove("hidden"))})}document.addEventListener("DOMContentLoaded",()=>{g()});
