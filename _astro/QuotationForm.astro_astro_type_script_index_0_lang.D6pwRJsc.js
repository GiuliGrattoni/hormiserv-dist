import{g as l}from"./locationUtils.CAdnG0xJ.js";async function b(n,d){const{submitBtn:r,btnText:s,btnLoading:t,formStatus:a}=d;r.disabled=!0,s?.classList.add("hidden"),t?.classList.remove("hidden"),a?.classList.add("hidden");try{const e=new FormData(n),o={};e.forEach((m,u)=>{o[u]=m});const i=await fetch("/api/quote.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),c=await i.json();if(!i.ok||!c.ok)throw new Error(c.error||"Error desconocido");return{ok:!0}}catch(e){return{ok:!1,error:e.message}}finally{r.disabled=!1,s?.classList.remove("hidden"),t?.classList.add("hidden")}}function f(){const n=document.getElementById("quotation-form");if(!n)return;const d=document.getElementById("submit-btn"),r=document.getElementById("btn-text"),s=document.getElementById("btn-loading"),t=document.getElementById("form-status"),a=l();if(a){const e=document.getElementById("quote-location");e&&(e.value=a)}n.addEventListener("submit",async e=>{e.preventDefault();const o=await b(n,{submitBtn:d,btnText:r,btnLoading:s,formStatus:t});o.ok?(t.className="bg-green-50 border-2 border-green-200 text-green-800 px-4 py-3 rounded-lg text-sm font-medium",t.textContent="¡Cotización enviada! Te contactaremos pronto.",t.classList.remove("hidden"),n.reset(),t.scrollIntoView({behavior:"smooth",block:"nearest"})):(t.className="bg-red-50 border-2 border-red-200 text-red-800 px-4 py-3 rounded-lg text-sm font-medium",t.textContent=o.error||"Hubo un error al enviar. Por favor, intentá nuevamente.",t.classList.remove("hidden"))})}document.addEventListener("DOMContentLoaded",()=>{f()});
